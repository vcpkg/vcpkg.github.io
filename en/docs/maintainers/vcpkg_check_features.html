<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/assets/mark/mark.svg" />
        <link rel="icon" href="/assets/mark/favicon.png" />
        <link rel="mask-icon" href="/assets/mark/favicon-mask-icon.svg" />
    
        <!-- boostrap style sheet -->
        <link
          rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous"
        />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/styles/default.min.css">
    
        <!-- our style sheet and fonts -->
        <link
          href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&family=Source+Sans+Pro:wght@400;700&display=swap"
          rel="stylesheet"
        />
        <link href="/css/common.css" rel="stylesheet" />
        <link href="/css/getting-started.css" rel="stylesheet" />
    
        <!-- bootstrap scripts -->
        <script type="text/javascript"
          src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js">
        </script>
        <script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"></script>
        <script
          src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
          integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
          crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/cmake.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/powershell.min.js"></script>
    
        <!-- our scripts -->
        <script src="/dist/common.js"></script>
        <script src="/dist/documentation.js"></script>
    <script>
        $(function () {
          $('#loadFooter').load('/en/footer.html');
        });
      </script>
    </head>
    <div id="loadNavBar"></div>
    <div id="banner"></div>
    <div class="page">
    <nav class="left-side">
      <div class="docs-mobile-heading hidden">Table of Contents</div>
      <div class="docs-mobile-exit hidden"><img class="docs-mobile-exit-icon" src="/assets/misc/exit-docs.svg"></div>
      <div class="search-bar">
        <input
                  class="search-box"
                  id="pkg-search"
                  type="search"
                  name="search"
                  placeholder="Search"
                  autocomplete="off"
                  oninput=""
                />
        <ul class="search hidden">
        </ul>
      </div>
      <div id="docsNavPane"></div>
      <script>
        $('#loadNavBar').load('/en/navbar.html', setScrollFocus);
        $('#docsNavPane').load('/en/docs/navpane.html', function () {
          $(function () {
            initDocumentation();
          });
        });
      </script>
</nav><main class="right-side" id="main">
<div class="docs-mobile-show"><img class="docs-mobile-show-table" src="/assets/misc/table-docs.svg">Table of Contents</div>
<h1 id="vcpkg_check_features">vcpkg_check_features</h1>
<p>The latest version of this document lives in the <a href="https://github.com/Microsoft/vcpkg/blob/master/docs/maintainers/vcpkg_check_features.md">vcpkg repo</a>.
Check if one or more features are a part of a package installation.</p>
<pre><code class="cmake language-cmake">vcpkg_check_features(
    OUT_FEATURE_OPTIONS &lt;out-var&gt;
    [PREFIX &lt;prefix&gt;]
    [FEATURES
        [&lt;feature-name&gt; &lt;feature-var&gt;]...
        ]
    [INVERTED_FEATURES
        [&lt;feature-name&gt; &lt;feature-var&gt;]...
        ]
)</code></pre>
<p>The <code>&lt;out-var&gt;</code> should be set to <code>FEATURE_OPTIONS</code> by convention.</p>
<p><code>vcpkg_check_features()</code> will:</p>
<ul>
<li>for each <code>&lt;feature-name&gt;</code> passed in <code>FEATURES</code>:<ul>
<li>if the feature is set, add <code>-D&lt;feature-var&gt;=ON</code> to <code>&lt;out-var&gt;</code>,
and set <code>&lt;prefix&gt;_&lt;feature-var&gt;</code> to ON.</li>
<li>if the feature is not set, add <code>-D&lt;feature-var&gt;=OFF</code> to <code>&lt;out-var&gt;</code>,
and set <code>&lt;prefix&gt;_&lt;feature-var&gt;</code> to OFF.</li></ul></li>
<li>for each <code>&lt;feature-name&gt;</code> passed in <code>INVERTED_FEATURES</code>:<ul>
<li>if the feature is set, add <code>-D&lt;feature-var&gt;=OFF</code> to <code>&lt;out-var&gt;</code>,
and set <code>&lt;prefix&gt;_&lt;feature-var&gt;</code> to OFF.</li>
<li>if the feature is not set, add <code>-D&lt;feature-var&gt;=ON</code> to <code>&lt;out-var&gt;</code>,
and set <code>&lt;prefix&gt;_&lt;feature-var&gt;</code> to ON.</li></ul></li>
</ul>
<p>If <code>&lt;prefix&gt;</code> is not passed, then the feature vars set are simply <code>&lt;feature-var&gt;</code>,
not <code>_&lt;feature-var&gt;</code>.</p>
<p>If <code>INVERTED_FEATURES</code> is not passed, then the <code>FEATURES</code> keyword is optional.
This behavior is deprecated.</p>
<p>If the same <code>&lt;feature-var&gt;</code> is passed multiple times,
then <code>vcpkg_check_features</code> will cause a fatal error,
since that is a bug.</p>
<h2 id="examples">Examples</h2>
<h3 id="example-1-regular-features">Example 1: Regular features</h3>
<pre><code class="cmake language-cmake">$ ./vcpkg install mimalloc[asm,secure]

# ports/mimalloc/portfile.cmake
vcpkg_check_features(OUT_FEATURE_OPTIONS FEATURE_OPTIONS
    FEATURES
        asm       MI_SEE_ASM
        override  MI_OVERRIDE
        secure    MI_SECURE
)

vcpkg_configure_cmake(
    SOURCE_PATH ${SOURCE_PATH}
    PREFER_NINJA
    OPTIONS
        # Expands to "-DMI_SEE_ASM=ON;-DMI_OVERRIDE=OFF;-DMI_SECURE=ON"
        ${FEATURE_OPTIONS}
)</code></pre>
<h3 id="example-2-inverted-features">Example 2: Inverted features</h3>
<pre><code class="cmake language-cmake">$ ./vcpkg install cpprestsdk[websockets]

# ports/cpprestsdk/portfile.cmake
vcpkg_check_features(
    INVERTED_FEATURES
        brotli      CPPREST_EXCLUDE_BROTLI
        websockets  CPPREST_EXCLUDE_WEBSOCKETS
)

vcpkg_configure_cmake(
    SOURCE_PATH ${SOURCE_PATH}
    PREFER_NINJA
    OPTIONS
        # Expands to "-DCPPREST_EXCLUDE_BROTLI=ON;-DCPPREST_EXCLUDE_WEBSOCKETS=OFF"
        ${FEATURE_OPTIONS}
)</code></pre>
<h3 id="example-3-set-multiple-options-for-same-feature">Example 3: Set multiple options for same feature</h3>
<pre><code class="cmake language-cmake">$ ./vcpkg install pcl[cuda]

# ports/pcl/portfile.cmake
vcpkg_check_features(
    FEATURES
        cuda  WITH_CUDA
        cuda  BUILD_CUDA
        cuda  BUILD_GPU
)

vcpkg_configure_cmake(
    SOURCE_PATH ${SOURCE_PATH}
    PREFER_NINJA
    OPTIONS
        # Expands to "-DWITH_CUDA=ON;-DBUILD_CUDA=ON;-DBUILD_GPU=ON"
        ${FEATURE_OPTIONS}
)</code></pre>
<h3 id="example-4-use-regular-and-inverted-features">Example 4: Use regular and inverted features</h3>
<pre><code class="cmake language-cmake">$ ./vcpkg install rocksdb[tbb]

# ports/rocksdb/portfile.cmake
vcpkg_check_features(
    FEATURES
        tbb   WITH_TBB
    INVERTED_FEATURES
        tbb   ROCKSDB_IGNORE_PACKAGE_TBB
)

vcpkg_configure_cmake(
    SOURCE_PATH ${SOURCE_PATH}
    PREFER_NINJA
    OPTIONS
        # Expands to "-DWITH_TBB=ON;-DROCKSDB_IGNORE_PACKAGE_TBB=OFF"
        ${FEATURE_OPTIONS}
)</code></pre>
<h2 id="examples-in-portfiles">Examples in portfiles</h2>
<ul>
<li><a href="https://github.com/microsoft/vcpkg/blob/master/ports/cpprestsdk/portfile.cmake">cpprestsdk</a></li>
<li><a href="https://github.com/microsoft/vcpkg/blob/master/ports/pcl/portfile.cmake">pcl</a></li>
<li><a href="https://github.com/microsoft/vcpkg/blob/master/ports/rocksdb/portfile.cmake">rocksdb</a></li>
</ul>
<h2 id="source">Source</h2>
<p><a href="https://github.com/Microsoft/vcpkg/blob/master/scripts/cmake/vcpkg_check_features.cmake">scripts/cmake/vcpkg_check_features.cmake</a></p>
</main></div><div id="loadFooter"></div></html>
