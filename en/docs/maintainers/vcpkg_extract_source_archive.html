<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/assets/mark/mark.svg" />
        <link rel="icon" href="/assets/mark/favicon.png" />
        <link rel="mask-icon" href="/assets/mark/favicon-mask-icon.svg" />
    
        <!-- boostrap style sheet -->
        <link
          rel="stylesheet"
          href="https://ajax.aspnetcdn.com/ajax/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous"
        />
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/styles/default.min.css"
          integrity="sha384-s4RLYRjGGbVqKOyMGGwfxUTMOO6D7r2eom7hWZQ6BjK2Df4ZyfzLXEkonSm0KLIQ"
          crossorigin="anonymous"
        />
    
        <!-- our style sheet and fonts -->
        <link href="/css/common.css" rel="stylesheet" />
        <link href="/css/getting-started.css" rel="stylesheet" />
    
        <!-- bootstrap scripts -->
        <script type="text/javascript"
          src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js">
        </script>
        <script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>
        <script
          src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"
          integrity="sha384-UBGmRyNtwBeGap4zdtKXLwUHdLJM9M/aSMLo8NaIzCxnLxYU6F9+V8veOXP3Fakh"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://ajax.aspnetcdn.com/ajax/bootstrap/4.5.0/bootstrap.min.js"
          integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"
          integrity="sha384-DmE/PJ3PvpXS92Z4Sn7vSRTqJd0T/2xkGtNgm2JaZFczBOZdCf3XbZOwnRHDgjAA"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/cmake.min.js"
          integrity="sha384-x//ggWQQKDYM6gkxzOdTUJNX9tNhjYBuM1SkQ3kgwzlFH9cxNW2meFXccjs06ubh"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/powershell.min.js"
          integrity="sha384-+05Cp42tk0QutdpySQ0HsmEskItQQcyh04nmNheHuy1epFAdvUC9kpiwJk9lx419"
          crossorigin="anonymous"
        ></script>
    
        <!-- our scripts -->
        <script src="/dist/common.js"></script>
        <script src="/dist/documentation.js"></script>
    <script>
        $(function () {
          $('#loadFooter').load('/en/footer.html');
        });
      </script>
    </head>
    <div id="loadNavBar"></div>
    <div id="banner"></div>
    <div class="page">
    <nav class="left-side">
      <div class="docs-mobile-heading hidden">Table of Contents</div>
      <div class="docs-mobile-exit hidden"><img class="docs-mobile-exit-icon" src="/assets/misc/exit-docs.svg"></div>
      <div class="search-bar">
        <input
                  class="search-box"
                  id="pkg-search"
                  type="search"
                  name="search"
                  placeholder="Search"
                  autocomplete="off"
                  oninput=""
                />
        <ul class="search hidden">
        </ul>
      </div>
      <div id="docsNavPane"></div>
      <script>
        $('#loadNavBar').load('/en/navbar.html', setScrollFocus);
        $('#docsNavPane').load('/en/docs/navpane.html', function () {
          $(function () {
            initDocumentation();
          });
        });
      </script>
</nav><main class="right-side" id="main">
<div class="docs-mobile-show"><img class="docs-mobile-show-table" src="/assets/misc/table-docs.svg">Table of Contents</div>
<h1 id="vcpkg_extract_source_archive">vcpkg_extract_source_archive</h1>
<p>The latest version of this document lives in the <a href="https://github.com/Microsoft/vcpkg/blob/master/docs/maintainers/vcpkg_extract_source_archive.md">vcpkg repo</a>.</p>
<p>Extract an archive into the source directory.</p>
<h2 id="usage">Usage</h2>
<p>There are two "overloads" of this function. The first is deprecated:</p>
<pre><code class="cmake language-cmake">vcpkg_extract_source_archive(&lt;${ARCHIVE}&gt; [&lt;${TARGET_DIRECTORY}&gt;])</code></pre>
<p>This overload should not be used.</p>
<p>The latter is suggested to use for all future <code>vcpkg_extract_source_archive</code>s.</p>
<pre><code class="cmake language-cmake">vcpkg_extract_source_archive(&lt;out-var&gt;
    ARCHIVE &lt;path&gt;
    [NO_REMOVE_ONE_LEVEL]
    [PATCHES &lt;patch&gt;...]
    [SOURCE_BASE &lt;base&gt;]
    [BASE_DIRECTORY &lt;relative-path&gt; | WORKING_DIRECTORY &lt;absolute-path&gt;]
)</code></pre>
<p><code>vcpkg_extract_source_archive</code> takes an archive and extracts it.
It replaces existing uses of <code>vcpkg_extract_source_archive_ex</code>.
The simplest use of it is:</p>
<pre><code class="cmake language-cmake">vcpkg_download_distfile(archive ...)
vcpkg_extract_source_archive(source_path ARCHIVE "${archive}")</code></pre>
<p>The general expectation is that an archives are laid out with a base directory,
and all the actual files underneath that directory; in other words, if you
extract the archive, you'll get something that looks like:</p>
<pre><code>zlib-1.2.11/
    doc/
        ...
    examples/
        ...
    ChangeLog
    CMakeLists.txt
    README
    zlib.h
    ...</code></pre>
<p><code>vcpkg_extract_source_archive</code> automatically removes this directory,
and gives you the items under it directly. However, this only works
when there is exactly one item in the top level of an archive.
Otherwise, you'll have to pass the <code>NO_REMOVE_ONE_LEVEL</code> argument to
prevent <code>vcpkg_extract_source_archive</code> from performing this transformation.</p>
<p>If the source needs to be patched in some way, the <code>PATCHES</code> argument
allows one to do this, just like other <code>vcpkg_from_*</code> functions.</p>
<p><code>vcpkg_extract_source_archive</code> extracts the files to
<code>${CURRENT_BUILDTREES_DIR}/&lt;base-directory&gt;/&lt;source-base&gt;-&lt;hash&gt;.clean</code>.
When in editable mode, no <code>.clean</code> is appended,
to allow for a user to modify the sources.
<code>base-directory</code> defaults to <code>src</code>,
and <code>source-base</code> defaults to the stem of <code>&lt;archive&gt;</code>.
You can change these via the <code>BASE_DIRECTORY</code> and <code>SOURCE_BASE</code> arguments
respectively.
If you need to extract to a location that is not based in <code>CURRENT_BUILDTREES_DIR</code>,
you can use the <code>WORKING_DIRECTORY</code> argument to do the same.</p>
<h2 id="examples">Examples</h2>
<ul>
<li><a href="https://github.com/Microsoft/vcpkg/blob/master/ports/libraw/portfile.cmake">libraw</a></li>
<li><a href="https://github.com/Microsoft/vcpkg/blob/master/ports/protobuf/portfile.cmake">protobuf</a></li>
<li><a href="https://github.com/Microsoft/vcpkg/blob/master/ports/msgpack/portfile.cmake">msgpack</a></li>
</ul>
<h2 id="source">Source</h2>
<p><a href="https://github.com/Microsoft/vcpkg/blob/master/scripts/cmake/vcpkg_extract_source_archive.cmake">scripts/cmake/vcpkg_extract_source_archive.cmake</a></p>
</main></div><div id="loadFooter"></div></html>
