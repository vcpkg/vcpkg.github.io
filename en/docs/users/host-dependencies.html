<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/assets/mark/mark.svg" />
        <link rel="icon" href="/assets/mark/favicon.png" />
        <link rel="mask-icon" href="/assets/mark/favicon-mask-icon.svg" />
    
        <!-- boostrap style sheet -->
        <link
          rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous"
        />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/styles/default.min.css">
    
        <!-- our style sheet and fonts -->
        <link
          href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&family=Source+Sans+Pro:wght@400;700&display=swap"
          rel="stylesheet"
        />
        <link href="/css/common.css" rel="stylesheet" />
        <link href="/css/getting-started.css" rel="stylesheet" />
    
        <!-- bootstrap scripts -->
        <script type="text/javascript"
          src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js">
        </script>
        <script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"></script>
        <script
          src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
          integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
          crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/cmake.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/powershell.min.js"></script>
    
        <!-- our scripts -->
        <script src="/dist/common.js"></script>
        <script src="/dist/documentation.js"></script>
    <script>
        $(function () {
          $('#loadFooter').load('/en/footer.html');
        });
      </script>
    </head>
    <div id="loadNavBar"></div>
    <div id="banner"></div>
    <div class="page">
    <nav class="left-side">
      <div class="docs-mobile-heading hidden">Table of Contents</div>
      <div class="docs-mobile-exit hidden"><img class="docs-mobile-exit-icon" src="/assets/misc/exit-docs.svg"></div>
      <div class="search-bar">
        <input
                  class="search-box"
                  id="pkg-search"
                  type="search"
                  name="search"
                  placeholder="Search"
                  autocomplete="off"
                  oninput=""
                />
        <ul class="search hidden">
        </ul>
      </div>
      <div id="docsNavPane"></div>
      <script>
        $('#loadNavBar').load('/en/navbar.html', setScrollFocus);
        $('#docsNavPane').load('/en/docs/navpane.html', function () {
          $(function () {
            initDocumentation();
          });
        });
      </script>
</nav><main class="right-side" id="main">
<div class="docs-mobile-show"><img class="docs-mobile-show-table" src="/assets/misc/table-docs.svg">Table of Contents</div>
<h1 id="host-dependencies">Host Dependencies</h1>
<p>Tools used at build time by other ports to generate code or implement a custom build system can be packaged inside vcpkg.</p>
<h2 id="consuming">Consuming</h2>
<p>When consuming a port as a tool, you must set the dependency's <code>"host"</code> field to true. For example:</p>
<pre><code class="json language-json">{
    "name": "contoso-http-library",
    "version-string": "1.0.0",
    "description": "Contoso's http runtime library",
    "dependencies": [
        "contoso-core-library",
        {
            "name": "contoso-code-generator",
            "host": true
        },
        {
            "name": "contoso-build-system",
            "host": true
        }
    ]
}</code></pre>
<p>In this case, the <code>contoso-code-generator</code> and <code>contoso-build-system</code> (including any transitive dependencies) will be built and installed for the host triplet before <code>contoso-http-library</code> is built.</p>
<blockquote>
  <p>Note: Consumers must use <code>vcpkg.json</code> instead of <code>CONTROL</code> as their metadata format. You can easily convert an existing <code>CONTROL</code> file using <code>vcpkg format-manifest /path/to/CONTROL</code>.</p>
</blockquote>
<p>Then, within the portfile of the consumer (<code>contoso-http-library</code> in the example), the CMake variable <code>CURRENT_HOST_INSTALLED_DIR</code> will be defined to <code>installed/&lt;host-triplet&gt;</code> and should be used to locate any required assets. In the example, <code>contoso-code-generator</code> might have installed <code>tools/contoso-code-generator/ccg.exe</code> which the consumer would add to its local path via</p>
<pre><code class="cmake language-cmake"># ports/contoso-http-library/portfile.cmake
vcpkg_add_to_path(${CURRENT_HOST_INSTALLED_DIR}/tools/contoso-code-generator)</code></pre>
<h2 id="specifying-the-host-triplet">Specifying the Host Triplet</h2>
<p>The default host triplets are chosen based on the host architecture and operating system, for example <code>x64-windows</code>, <code>x64-linux</code>, or <code>x64-osx</code>. They can be overridden via:</p>
<ol>
<li>In CMake-based manifest mode, calling <code>set(VCPKG_HOST_TRIPLET "&lt;triplet&gt;" CACHE STRING "")</code> before the first <code>project()</code> directive</li>
<li>In MSBuild-based manifest mode, setting the <code>vcpkgHostTriplet</code> property</li>
<li>On the command line, via the flag <code>--host-triplet=...</code></li>
<li>The <code>VCPKG_DEFAULT_HOST_TRIPLET</code> environment variable</li>
</ol>
<h2 id="producing">Producing</h2>
<p>Producing a tool has no special requirements; tools should be authored as a standard port, following all the normal policies and practices. Notably, they should build against <code>TARGET_TRIPLET</code>, not <code>HOST_TRIPLET</code> within the context of their portfile.</p>
<p>Sometimes, it can be useful to determine whether the current context is a cross-compiling one or not. This should be done by comparing the strings <code>TARGET_TRIPLET</code> and <code>HOST_TRIPLET</code>. For example:</p>
<pre><code class="cmake language-cmake">string(COMPARE EQUAL "${TARGET_TRIPLET}" "${HOST_TRIPLET}" I_AM_NOT_CROSSCOMPILING)

if(TARGET_TRIPLET STREQUAL HOST_TRIPLET)
    # This is a native build
else()
    # This is a cross build
endif()</code></pre>
<h2 id="host-only-ports">Host-only ports</h2>
<p>Some ports are host-only: script ports and tool ports are common examples.
In this case, you can use the <code>"native"</code> supports expression to describe this.
This supports expression is true when <code>TARGET_TRIPLET == HOST_TRIPLET</code>.</p>
</main></div><div id="loadFooter"></div></html>
