<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/assets/mark/mark.svg" />
        <link rel="icon" href="/assets/mark/favicon.png" />
        <link rel="mask-icon" href="/assets/mark/favicon-mask-icon.svg" />
    
        <!-- boostrap style sheet -->
        <link
          rel="stylesheet"
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous"
        />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/styles/default.min.css">
    
        <!-- our style sheet and fonts -->
        <link
          href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&family=Source+Sans+Pro:wght@400;700&display=swap"
          rel="stylesheet"
        />
        <link href="/css/common.css" rel="stylesheet" />
        <link href="/css/getting-started.css" rel="stylesheet" />
    
        <!-- bootstrap scripts -->
        <script type="text/javascript"
          src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js">
        </script>
        <script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"></script>
        <script
          src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"
          integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
          crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/cmake.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/powershell.min.js"></script>
    
        <!-- our scripts -->
        <script src="/dist/documentation.js"></script>
        <script src="/dist/common.js"></script>
        <script src="/dist/getting-started.js"></script>
    <script>
        $(document).ready(function () {
          handleDefaultTreeViewExpand(" > docs > users > android.md");
          $('#loadNavBar').load('/en/navbar.html', setScrollFocus);
          $('#loadFooter').load('/en/footer.html');
          
        });
      </script>
    
    </head>
    <div id="loadNavBar"></div>
    <div class="page">
    <nav class="left-side">
      <div class="docs-mobile-heading hidden">Table of Contents</div>
      <div class="docs-mobile-exit hidden"><img class="docs-mobile-exit-icon" src="/assets/misc/exit-docs.svg"></div>
      <div class="search-bar">
        <input
                  class="search-box"
                  id="pkg-search"
                  type="search"
                  name="search"
                  placeholder="Search"
                  autocomplete="off"
                  oninput=""
                />
        <ul class="search hidden">
        </ul>
      </div>
<ul class=docs-navigation><li class="list-can-expand"><button class="button-list-can-expand">about</button></li>
<ul class="collapse standard-padding">
<a class="doc-outline-link" href="/en/docs/about/faq.html"><li class="list-can-expand">faq</li></a>
<a class="doc-outline-link" href="/en/docs/about/privacy.html"><li class="list-can-expand">privacy</li></a>
</ul>
<li class="list-can-expand"><button class="button-list-can-expand">examples</button></li>
<ul class="collapse standard-padding">
<a class="doc-outline-link" href="/en/docs/examples/installing-and-using-packages.html"><li class="list-can-expand">Installing And Using Packages</li></a>
<a class="doc-outline-link" href="/en/docs/examples/manifest-mode-cmake.html"><li class="list-can-expand">Manifest Mode Cmake</li></a>
<a class="doc-outline-link" href="/en/docs/examples/modify-baseline-to-pin-old-boost.html"><li class="list-can-expand">Modify Baseline To Pin Old Boost</li></a>
<a class="doc-outline-link" href="/en/docs/examples/overlay-triplets-linux-dynamic.html"><li class="list-can-expand">Overlay Triplets Linux Dynamic</li></a>
<a class="doc-outline-link" href="/en/docs/examples/packaging-github-repos.html"><li class="list-can-expand">Packaging Github Repos</li></a>
<a class="doc-outline-link" href="/en/docs/examples/packaging-zipfiles.html"><li class="list-can-expand">Packaging Zipfiles</li></a>
<a class="doc-outline-link" href="/en/docs/examples/patching.html"><li class="list-can-expand">patching</li></a>
<a class="doc-outline-link" href="/en/docs/examples/versioning.getting-started.html"><li class="list-can-expand">Get Started with Versioning</li></a>
</ul>
<li class="list-can-expand"><button class="button-list-can-expand">maintainers</button></li>
<ul class="collapse standard-padding">
<li class="list-can-expand"><button class="button-list-can-expand">internal</button></li>
<ul class="collapse standard-padding">
<a class="doc-outline-link" href="/en/docs/maintainers/internal/vcpkg_internal_get_cmake_vars.html"><li class="list-can-expand">vcpkg_internal_get_cmake_vars</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/internal/z_vcpkg_apply_patches.html"><li class="list-can-expand">z_vcpkg_apply_patches</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/internal/z_vcpkg_forward_output_variable.html"><li class="list-can-expand">z_vcpkg_forward_output_variable</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/internal/z_vcpkg_function_arguments.html"><li class="list-can-expand">z_vcpkg_function_arguments</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/internal/z_vcpkg_prettify_command_line.html"><li class="list-can-expand">z_vcpkg_prettify_command_line</li></a>
</ul>
<li class="list-can-expand"><button class="button-list-can-expand">ports</button></li>
<ul class="collapse standard-padding">
<li class="list-can-expand"><button class="button-list-can-expand">vcpkg Cmake</button></li>
<ul class="collapse standard-padding">
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-cmake/vcpkg_cmake_build.html"><li class="list-can-expand">vcpkg_cmake_build</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-cmake/vcpkg_cmake_configure.html"><li class="list-can-expand">vcpkg_cmake_configure</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-cmake/vcpkg_cmake_install.html"><li class="list-can-expand">vcpkg_cmake_install</li></a>
</ul>
<li class="list-can-expand"><button class="button-list-can-expand">vcpkg Cmake Config</button></li>
<ul class="collapse standard-padding">
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-cmake-config/vcpkg_cmake_config_fixup.html"><li class="list-can-expand">vcpkg_cmake_config_fixup</li></a>
</ul>
<li class="list-can-expand"><button class="button-list-can-expand">vcpkg Pkgconfig Get Modules</button></li>
<ul class="collapse standard-padding">
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-pkgconfig-get-modules/x_vcpkg_pkgconfig_get_modules.html"><li class="list-can-expand">x_vcpkg_pkgconfig_get_modules</li></a>
</ul>
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-cmake-config.html"><li class="list-can-expand">vcpkg Cmake Config</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-cmake.html"><li class="list-can-expand">vcpkg Cmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/ports/vcpkg-pkgconfig-get-modules.html"><li class="list-can-expand">vcpkg Pkgconfig Get Modules</li></a>
</ul>
<a class="doc-outline-link" href="/en/docs/maintainers/cmake-guidelines.html"><li class="list-can-expand">Cmake Guidelines</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/control-files.html"><li class="list-can-expand">Control Files</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/execute_process.html"><li class="list-can-expand">execute_process</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/maintainer-guide.html"><li class="list-can-expand">Maintainer Guide</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/manifest-files.html"><li class="list-can-expand">Manifest Files</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/portfile-functions.html"><li class="list-can-expand">Portfile Functions</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/pr-review-checklist.html"><li class="list-can-expand">Pr Review Checklist</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/registries.html"><li class="list-can-expand">registries</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_acquire_msys.html"><li class="list-can-expand">vcpkg_acquire_msys</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_add_to_path.html"><li class="list-can-expand">vcpkg_add_to_path</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_apply_patches.html"><li class="list-can-expand">vcpkg_apply_patches</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_buildpath_length_warning.html"><li class="list-can-expand">vcpkg_buildpath_length_warning</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_build_cmake.html"><li class="list-can-expand">vcpkg_build_cmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_build_make.html"><li class="list-can-expand">vcpkg_build_make</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_build_msbuild.html"><li class="list-can-expand">vcpkg_build_msbuild</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_build_ninja.html"><li class="list-can-expand">vcpkg_build_ninja</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_build_nmake.html"><li class="list-can-expand">vcpkg_build_nmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_build_qmake.html"><li class="list-can-expand">vcpkg_build_qmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_check_features.html"><li class="list-can-expand">vcpkg_check_features</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_check_linkage.html"><li class="list-can-expand">vcpkg_check_linkage</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_clean_executables_in_bin.html"><li class="list-can-expand">vcpkg_clean_executables_in_bin</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_clean_msbuild.html"><li class="list-can-expand">vcpkg_clean_msbuild</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_common_definitions.html"><li class="list-can-expand">vcpkg_common_definitions</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_configure_cmake.html"><li class="list-can-expand">vcpkg_configure_cmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_configure_gn.html"><li class="list-can-expand">vcpkg_configure_gn</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_configure_make.html"><li class="list-can-expand">vcpkg_configure_make</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_configure_meson.html"><li class="list-can-expand">vcpkg_configure_meson</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_configure_qmake.html"><li class="list-can-expand">vcpkg_configure_qmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_copy_pdbs.html"><li class="list-can-expand">vcpkg_copy_pdbs</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_copy_tools.html"><li class="list-can-expand">vcpkg_copy_tools</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_copy_tool_dependencies.html"><li class="list-can-expand">vcpkg_copy_tool_dependencies</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_download_distfile.html"><li class="list-can-expand">vcpkg_download_distfile</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_execute_build_process.html"><li class="list-can-expand">vcpkg_execute_build_process</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_execute_in_download_mode.html"><li class="list-can-expand">vcpkg_execute_in_download_mode</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_execute_required_process.html"><li class="list-can-expand">vcpkg_execute_required_process</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_execute_required_process_repeat.html"><li class="list-can-expand">vcpkg_execute_required_process_repeat</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_extract_source_archive.html"><li class="list-can-expand">vcpkg_extract_source_archive</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_extract_source_archive_ex.html"><li class="list-can-expand">vcpkg_extract_source_archive_ex</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_fail_port_install.html"><li class="list-can-expand">vcpkg_fail_port_install</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_find_acquire_program.html"><li class="list-can-expand">vcpkg_find_acquire_program</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_find_fortran.html"><li class="list-can-expand">vcpkg_find_fortran</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_fixup_cmake_targets.html"><li class="list-can-expand">vcpkg_fixup_cmake_targets</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_fixup_pkgconfig.html"><li class="list-can-expand">vcpkg_fixup_pkgconfig</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_from_bitbucket.html"><li class="list-can-expand">vcpkg_from_bitbucket</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_from_git.html"><li class="list-can-expand">vcpkg_from_git</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_from_github.html"><li class="list-can-expand">vcpkg_from_github</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_from_gitlab.html"><li class="list-can-expand">vcpkg_from_gitlab</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_from_sourceforge.html"><li class="list-can-expand">vcpkg_from_sourceforge</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_get_program_files_platform_bitness.html"><li class="list-can-expand">vcpkg_get_program_files_platform_bitness</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_get_windows_sdk.html"><li class="list-can-expand">vcpkg_get_windows_sdk</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_install_cmake.html"><li class="list-can-expand">vcpkg_install_cmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_install_gn.html"><li class="list-can-expand">vcpkg_install_gn</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_install_make.html"><li class="list-can-expand">vcpkg_install_make</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_install_meson.html"><li class="list-can-expand">vcpkg_install_meson</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_install_msbuild.html"><li class="list-can-expand">vcpkg_install_msbuild</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_install_nmake.html"><li class="list-can-expand">vcpkg_install_nmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_install_qmake.html"><li class="list-can-expand">vcpkg_install_qmake</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_list.html"><li class="list-can-expand">vcpkg_list</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_minimum_required.html"><li class="list-can-expand">vcpkg_minimum_required</li></a>
<a class="doc-outline-link" href="/en/docs/maintainers/vcpkg_replace_string.html"><li class="list-can-expand">vcpkg_replace_string</li></a>
</ul>
<li class="list-can-expand"><button class="button-list-can-expand">specifications</button></li>
<ul class="collapse standard-padding">
<a class="doc-outline-link" href="/en/docs/specifications/binarycaching.html"><li class="list-can-expand">binarycaching</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/export-command.html"><li class="list-can-expand">Export Command</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/feature-packages.html"><li class="list-can-expand">Feature Packages</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/manifests.html"><li class="list-can-expand">manifests</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/ports-overlay.html"><li class="list-can-expand">Ports Overlay</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/prefab.html"><li class="list-can-expand">prefab</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/registries-2.html"><li class="list-can-expand">Registries 2</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/registries.html"><li class="list-can-expand">registries</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/scripts-extraction.html"><li class="list-can-expand">Scripts Extraction</li></a>
<a class="doc-outline-link" href="/en/docs/specifications/versioning.html"><li class="list-can-expand">versioning</li></a>
</ul>
<li class="list-can-expand"><button class="button-list-can-expand">users</button></li>
<ul class="collapse standard-padding">
<li class="list-can-expand"><span id="currentPath">android</span></li>
<a class="doc-outline-link" href="/en/docs/users/assetcaching.html"><li class="list-can-expand">assetcaching</li></a>
<a class="doc-outline-link" href="/en/docs/users/binarycaching.html"><li class="list-can-expand">binarycaching</li></a>
<a class="doc-outline-link" href="/en/docs/users/config-environment.html"><li class="list-can-expand">Config Environment</li></a>
<a class="doc-outline-link" href="/en/docs/users/host-dependencies.html"><li class="list-can-expand">Host Dependencies</li></a>
<a class="doc-outline-link" href="/en/docs/users/integration.html"><li class="list-can-expand">integration</li></a>
<a class="doc-outline-link" href="/en/docs/users/manifests.html"><li class="list-can-expand">manifests</li></a>
<a class="doc-outline-link" href="/en/docs/users/mingw.html"><li class="list-can-expand">mingw</li></a>
<a class="doc-outline-link" href="/en/docs/users/registries.html"><li class="list-can-expand">registries</li></a>
<a class="doc-outline-link" href="/en/docs/users/selecting-library-features.html"><li class="list-can-expand">Selecting Library Features</li></a>
<a class="doc-outline-link" href="/en/docs/users/triplets.html"><li class="list-can-expand">triplets</li></a>
<a class="doc-outline-link" href="/en/docs/users/versioning.implementation-details.html"><li class="list-can-expand">Versioning.implementation Details</li></a>
<a class="doc-outline-link" href="/en/docs/users/versioning.html"><li class="list-can-expand">versioning</li></a>
</ul>
<a class="doc-outline-link" href="/en/docs/README.html"><li class="list-can-expand">README</li></a>
</ul>
</nav><main class="right-side" id="main">
<div class="docs-mobile-show"><img class="docs-mobile-show-table" src="/assets/misc/table-docs.svg">Table of Contents</div>
<h1 id="vcpkg-and-android">vcpkg and Android</h1>
<p><strong>The latest version of this documentation is available on <a href="https://github.com/Microsoft/vcpkg/tree/master/docs/users/android.md">GitHub</a>.</strong></p>
<p>Android is not officially supported, and there are no official android triplets at the moment.</p>
<p>However, some packages can compile to Android, and the situation is improving: see the list of <a href="https://github.com/Microsoft/vcpkg/pulls?q=+android+">PR related to Android</a>.</p>
<h2 id="android-build-requirements">Android build requirements</h2>
<ol>
<li><p>Download the <a href="https://developer.android.com/ndk/downloads/">android ndk</a></p></li>
<li><p>Set environment variable <code>ANDROID_NDK_HOME</code> to your android ndk installation. 
For example:</p></li>
</ol>
<pre><code class="bash language-bash">export ANDROID_NDK_HOME=/home/your-account/Android/Sdk/ndk-bundle</code></pre>
<p>Or:</p>
<pre><code class="bash language-bash">export ANDROID_NDK_HOME=/home/your-account/Android/android-ndk-r21b</code></pre>
<ol start="3">
<li><p>Install <a href="https://github.com/microsoft/vcpkg">vcpkg</a></p></li>
<li><p>Set environment variable <code>VCPKG_ROOT</code> to your vcpkg installation.</p></li>
</ol>
<pre><code class="bash language-bash">export VCPKG_ROOT=/path/to/vcpkg</code></pre>
<h2 id="create-the-android-triplets">Create the android triplets</h2>
<h3 id="android-abi-and-corresponding-vcpkg-triplets">Android ABI and corresponding vcpkg triplets</h3>
<p>There are four different Android ABI, each of which maps to 
a vcpkg triplet. The following table outlines the mapping from vcpkg architectures to android architectures</p>
<table>
<thead>
<tr>
<th id="vcpkg_target_triplet">VCPKG_TARGET_TRIPLET</th>
<th id="android_abi">ANDROID_ABI</th>
</tr>
</thead>
<tbody>
<tr>
<td>arm64-android</td>
<td>arm64-v8a</td>
</tr>
<tr>
<td>arm-android</td>
<td>armeabi-v7a</td>
</tr>
<tr>
<td>x64-android</td>
<td>x86_64</td>
</tr>
<tr>
<td>x86-android</td>
<td>x86</td>
</tr>
</tbody>
</table>
<h3 id="create-the-android-triplets-1">Create the android triplets</h3>
<p>You can copy-paste the script below to populate them, and adjust them to your needs if required.</p>
<pre><code class="bash language-bash">cd $VCPKG_ROOT

echo "
set(VCPKG_TARGET_ARCHITECTURE arm)
set(VCPKG_CRT_LINKAGE dynamic)
set(VCPKG_LIBRARY_LINKAGE dynamic)
set(VCPKG_CMAKE_SYSTEM_NAME Android)
" &gt; triplets/community/arm-android.cmake

echo "
set(VCPKG_TARGET_ARCHITECTURE arm64)
set(VCPKG_CRT_LINKAGE dynamic)
set(VCPKG_LIBRARY_LINKAGE dynamic)
set(VCPKG_CMAKE_SYSTEM_NAME Android)
" &gt; triplets/community/arm64-android.cmake

echo "
set(VCPKG_TARGET_ARCHITECTURE x86)
set(VCPKG_CRT_LINKAGE dynamic)
set(VCPKG_LIBRARY_LINKAGE dynamic)
set(VCPKG_CMAKE_SYSTEM_NAME Android)
" &gt; triplets/community/x86-android.cmake

echo "
set(VCPKG_TARGET_ARCHITECTURE x64)
set(VCPKG_CRT_LINKAGE dynamic)
set(VCPKG_LIBRARY_LINKAGE dynamic)
set(VCPKG_CMAKE_SYSTEM_NAME Android)
" &gt; triplets/community/x64-android.cmake</code></pre>
<h2 id="install-libraries-for-android-using-vcpkg">Install libraries for Android using vcpkg</h2>
<p>Example for jsoncpp:</p>
<pre><code class="bash language-bash">cd $VCPKG_ROOT

# specify the triplet like this
./vcpkg install jsoncpp --triplet arm-android   
# or like this
./vcpkg install jsoncpp:arm64-android           
./vcpkg install jsoncpp:x86-android
./vcpkg install jsoncpp:x64-android</code></pre>
<h3 id="using-vulkan-sdk">Using Vulkan SDK</h3>
<p>vcpkg has a <a href="https://github.com/microsoft/vcpkg/blob/master/ports/vulkan/portfile.cmake"><code>vulkan</code> package</a> which allows you to <code>find_package(Vulkan)</code>. To use it you have to provide <code>VULKAN_SDK</code> environment variable.</p>
<pre><code class="bash language-bash">export VULKAN_SDK=/usr/local
./vcpkg install vulkan</code></pre>
<p>NDK already contains <a href="https://developer.android.com/ndk/guides/graphics/getting-started">Vulkan</a> headers and <code>libvulkan.so</code> binaries for each of its architecture. 
To expose them to VcPkg, you can consider <code>export VULKAN_SDK=...</code> for each installation. 
But by placing <code>set(ENV{VULKAN_SDK} ...)</code> in the triplet files, you can skip the tedious work.</p>
<p>If you are using NDK 21.3.6528147 or earlier version, it will be like the following.</p>
<pre><code class="cmake language-cmake"># In android triplets... (e.g. arm64-android.cmake)
set(VCPKG_CMAKE_SYSTEM_NAME Android)
# ...
# If your API level is 30, libvulkan.so is at $ENV{ANDROID_NDK_HOME}/platforms/android-30/arch-arm64/usr/lib
set(ENV{VULKAN_SDK} $ENV{ANDROID_NDK_HOME}/sysroot/usr)</code></pre>
<p>Notice that <strong>the location of the sysroot has changed since NDK 22</strong>. (see <a href="https://github.com/android/ndk/issues/1407">https://github.com/android/ndk/issues/1407</a>) 
If you prefer using <a href="https://developer.android.com/studio/projects/install-ndk#default-ndk-per-agp">the latest version</a>, check the <a href="https://android.googlesource.com/platform/ndk/+/master/docs/BuildSystemMaintainers.md#sysroot">BuildSystemMaintainers.md of the NDK document</a> and then put appropriate path for your system.</p>
<p>For example, Mac OS users will use the path like this.</p>
<pre><code class="cmake language-cmake"># In android triplets... (e.g. arm64-android.cmake)
set(VCPKG_CMAKE_SYSTEM_NAME Android)
# ...
# If your API level is 30, libvulkan.so is at $ENV{ANDROID_NDK_HOME}/toolchains/llvm/prebuilt/darwin-x86_64/sysroot/usr/lib/aarch64-linux-android/30
set(ENV{VULKAN_SDK} $ENV{ANDROID_NDK_HOME}/toolchains/llvm/prebuilt/darwin-x86_64/sysroot/usr)</code></pre>
<p>By doing this for all android triplets, you can install <code>vulkan</code> and the packages that require it. (e.g. <code>vulkan-hpp</code>)</p>
<p><details>
  <summary markdown="span"><code>vcpkg install vulkan-hpp:arm64-android</code></summary></p>
<pre><code class="console language-console">user@host$ ./vcpkg install vulkan-hpp:arm64-android
Computing installation plan...
The following packages will be built and installed:
  * vulkan[core]:arm64-android -&gt; 1.1.82.1-1
    vulkan-hpp[core]:arm64-android -&gt; 2019-05-11-1
Additional packages (*) will be modified to complete this operation.
Detecting compiler hash for triplet arm64-android...
...
Starting package 1/2: vulkan:arm64-android
Building package vulkan[core]:arm64-android...
-- Using community triplet arm64-android. This triplet configuration is not guaranteed to succeed.
-- [COMMUNITY] Loading triplet configuration from: /.../vcpkg/triplets/community/arm64-android.cmake
-- Querying VULKAN_SDK Environment variable
-- Searching /.../Library/Android/sdk/ndk/22.1.7171670/toolchains/llvm/prebuilt/darwin-x86_64/sysroot/usr/include/vulkan/ for vulkan.h
-- Found vulkan.h
-- Performing post-build validation
-- Performing post-build validation done
...
Building package vulkan[core]:arm64-android... done
Installing package vulkan[core]:arm64-android...
Installing package vulkan[core]:arm64-android... done
Elapsed time for package vulkan:arm64-android: 35.9 ms
Starting package 2/2: vulkan-hpp:arm64-android
Building package vulkan-hpp[core]:arm64-android...
-- Using community triplet arm64-android. This triplet configuration is not guaranteed to succeed.
-- [COMMUNITY] Loading triplet configuration from: /.../vcpkg/triplets/community/arm64-android.cmake
-- Using cached /.../vcpkg/downloads/KhronosGroup-Vulkan-Hpp-5ce8ae7fd0d9c0543d02f33cfa8a66e6a43e2150.tar.gz
-- Cleaning sources at /.../vcpkg/buildtrees/vulkan-hpp/src/e6a43e2150-4f344cd911.clean. Use --editable to skip cleaning for the packages you specify.
-- Extracting source /.../vcpkg/downloads/KhronosGroup-Vulkan-Hpp-5ce8ae7fd0d9c0543d02f33cfa8a66e6a43e2150.tar.gz
-- Using source at /.../vcpkg/buildtrees/vulkan-hpp/src/e6a43e2150-4f344cd911.clean
-- Performing post-build validation
-- Performing post-build validation done
...
Building package vulkan-hpp[core]:arm64-android... done
Installing package vulkan-hpp[core]:arm64-android...
Installing package vulkan-hpp[core]:arm64-android... done
Elapsed time for package vulkan-hpp:arm64-android: 144.5 ms

Total elapsed time: 1.013 s

The package vulkan-hpp:arm64-android is header only and can be used from CMake via:

    find_path(VULKAN_HPP_INCLUDE_DIRS "vulkan/vulkan.hpp")
    target_include_directories(main PRIVATE ${VULKAN_HPP_INCLUDE_DIRS})</code></pre>
<p></details></p>
<h2 id="consume-libraries-using-vpckg-cmake-and-the-android-toolchain">Consume libraries using vpckg, cmake and the android toolchain</h2>
<ol>
<li>Combine vcpkg and Android toolchains</li>
</ol>
<p>vcpkg and android both provide dedicated toolchains:</p>
<pre><code class="bash language-bash">vcpkg_toolchain_file=$VCPKG_ROOT/scripts/buildsystems/vcpkg.cmake
android_toolchain_file=$ANDROID_NDK_HOME/build/cmake/android.toolchain.cmake</code></pre>
<p>When using vcpkg, the vcpkg toolchain shall be specified first. </p>
<p>However, vcpkg provides a way to preload and additional toolchain, with the VCPKG_CHAINLOAD_TOOLCHAIN_FILE option. </p>
<pre><code class="bash language-bash">cmake \
  -DCMAKE_TOOLCHAIN_FILE=$vcpkg_toolchain_file \
  -DVCPKG_CHAINLOAD_TOOLCHAIN_FILE=$android_toolchain_file \
  ...</code></pre>
<ol start="2">
<li>Specify the android abi and vcpkg triplet</li>
</ol>
<p>When compiling for android, you need to select a matching "android abi" / "vcpkg triplet" pair.</p>
<p>For example:</p>
<pre><code class="bash language-bash">android_abi=armeabi-v7a
vcpkg_target_triplet=arm-android

cmake 
  ...
  -DVCPKG_TARGET_TRIPLET=$vcpkg_target_triplet \
  -DANDROID_ABI=$android_abi</code></pre>
<h3 id="test-on-an-example">Test on an example</h3>
<p>The folder <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake">docs/examples/vcpkg_android_example_cmake</a> provides a working example, with an android library that consumes the jsoncpp library:</p>
<p><em>Details</em></p>
<ul>
<li><p>The <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake/CMakeLists.txt">CMakeLists</a> simply uses <code>find_package</code> and <code>target_link_library</code></p></li>
<li><p>The <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake/compile.sh">compile.sh</a> script enables you to select any matching pair of "android abi" /  "vcpkg triplet" and to test the compilation</p></li>
<li><p>The dummy <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake/my_lib.cpp">my_lib.cpp</a> file uses the jsoncpp library</p></li>
</ul>
<p><em>Note</em>: this example only compiles an Android library, as the compilation of a full fledged Android App is beyond the scope of this document.</p>
<h3 id="test-on-an-example-using-vcpkg_androidcmakeexamplesvcpkg_android_example_cmake_scriptcmakevcpkg_androidcmake">Test on an example, using <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake_script/cmake/vcpkg_android.cmake">vcpkg_android.cmake</a></h3>
<p>The folder <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake_script">docs/examples/vcpkg_android_example_cmake_script</a> provides the same example, and uses a cmake script in order to simplify the usage.</p>
<p><em>Details</em></p>
<ul>
<li>The main <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake_script/CMakeLists.txt">CMakeLists</a> loads <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake_script/cmake/vcpkg_android.cmake">vcpkg_android.cmake</a> if the flag <code>VCPKG_TARGET_ANDROID</code> is set:</li>
</ul>
<pre><code class="cmake language-cmake">if (VCPKG_TARGET_ANDROID)
    include("cmake/vcpkg_android.cmake")
endif()</code></pre>
<p><em>Important: place these lines before calling project() !</em></p>
<ul>
<li>The <a href="https://github.com/microsoft/vcpkg/blob/master/docs/users/android.md/../../examples/vcpkg_android_example_cmake_script/compile.sh">compile.sh</a> script shows that it is then possible to compile for android using a simple cmake invocation, for example:</li>
</ul>
<pre><code class="bash language-bash">cmake .. -DVCPKG_TARGET_ANDROID=ON -DANDROID_ABI=armeabi-v7a</code></pre>
<h2 id="consume-libraries-using-vpckg-and-android-prefab-archives-aar-files">Consume libraries using vpckg, and Android prefab Archives (AAR files)</h2>
<p>See <a href="../specifications/prefab.html">prefab.md</a></p>
</main></div><div id="loadFooter"></div></html>
