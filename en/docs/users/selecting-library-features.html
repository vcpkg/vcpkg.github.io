<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/assets/mark/mark.svg" />
        <link rel="icon" href="/assets/mark/favicon.png" />
        <link rel="mask-icon" href="/assets/mark/favicon-mask-icon.svg" />
    
        <!-- boostrap style sheet -->
        <link
          rel="stylesheet"
          href="https://ajax.aspnetcdn.com/ajax/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous"
        />
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/styles/default.min.css"
          integrity="sha384-s4RLYRjGGbVqKOyMGGwfxUTMOO6D7r2eom7hWZQ6BjK2Df4ZyfzLXEkonSm0KLIQ"
          crossorigin="anonymous"
        />
    
        <!-- our style sheet and fonts -->
        <link href="/css/common.css" rel="stylesheet" />
        <link href="/css/getting-started.css" rel="stylesheet" />
    
        <!-- bootstrap scripts -->
        <script type="text/javascript"
          src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js">
        </script>
        <script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>
        <script
          src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"
          integrity="sha384-UBGmRyNtwBeGap4zdtKXLwUHdLJM9M/aSMLo8NaIzCxnLxYU6F9+V8veOXP3Fakh"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://ajax.aspnetcdn.com/ajax/bootstrap/4.5.0/bootstrap.min.js"
          integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"
          integrity="sha384-DmE/PJ3PvpXS92Z4Sn7vSRTqJd0T/2xkGtNgm2JaZFczBOZdCf3XbZOwnRHDgjAA"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/cmake.min.js"
          integrity="sha384-x//ggWQQKDYM6gkxzOdTUJNX9tNhjYBuM1SkQ3kgwzlFH9cxNW2meFXccjs06ubh"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/powershell.min.js"
          integrity="sha384-+05Cp42tk0QutdpySQ0HsmEskItQQcyh04nmNheHuy1epFAdvUC9kpiwJk9lx419"
          crossorigin="anonymous"
        ></script>
    
        <!-- our scripts -->
        <script src="/dist/common.js"></script>
        <script src="/dist/documentation.js"></script>
    <script>
        $(function () {
          $('#loadFooter').load('/en/footer.html');
        });
      </script>
    </head>
    <div id="loadNavBar"></div>
    <div id="banner"></div>
    <div class="page">
    <nav class="left-side">
      <div class="docs-mobile-heading hidden">Table of Contents</div>
      <div class="docs-mobile-exit hidden"><img class="docs-mobile-exit-icon" src="/assets/misc/exit-docs.svg"></div>
      <div class="search-bar">
        <input
                  class="search-box"
                  id="pkg-search"
                  type="search"
                  name="search"
                  placeholder="Search"
                  autocomplete="off"
                  oninput=""
                />
        <ul class="search hidden">
        </ul>
      </div>
      <div id="docsNavPane"></div>
      <script>
        $('#loadNavBar').load('/en/navbar.html', setScrollFocus);
        $('#docsNavPane').load('/en/docs/navpane.html', function () {
          $(function () {
            initDocumentation();
          });
        });
      </script>
</nav><main class="right-side" id="main">
<div class="docs-mobile-show"><img class="docs-mobile-show-table" src="/assets/misc/table-docs.svg">Table of Contents</div>
<h1 id="selecting-library-features">Selecting Library Features</h1>
<p><strong>The latest version of this documentation is available on <a href="https://github.com/Microsoft/vcpkg/tree/master/docs/users/selecting-library-features.md">GitHub</a>.</strong></p>
<h2 id="installing-a-library">Installing a library</h2>
<p>We will look at <a href="https://llvm.org/">llvm</a> as an example. You could install it using:</p>
<pre><code class="powershell language-powershell">&gt; vcpkg install llvm</code></pre>
<p>or via a manifest with</p>
<pre><code class="json language-json">{
  "dependencies": ["llvm"]
}</code></pre>
<p>With llvm now installed, we can execute:</p>
<pre><code class="powershell language-powershell">&gt; installed\x86-windows\bin\llc.exe --version</code></pre>
<p>we see:</p>
<pre><code class="powershell language-powershell">  Registered Targets:
    x86    - 32-bit X86: Pentium-Pro and above
    x86-64 - 64-bit X86: EM64T and AMD64</code></pre>
<h2 id="installing-additional-features">Installing additional features</h2>
<p>But <a href="https://llvm.org/docs/GettingStarted.html#local-llvm-configuration">llvm supports many more targets</a>, from ARM to SPARC to SystemZ.
However, clearly our current installation doesn't include ARM as a target;
thus, we need to learn how vcpkg allows us to install other LLVM targets.
The llvm port allows this via the "target-*" features.</p>
<p>If we do:</p>
<pre><code class="powershell language-powershell">&gt; vcpkg search llvm</code></pre>
<p>We can see:</p>
<pre><code>llvm                 10.0.0#6         The LLVM Compiler Infrastructure
llvm[clang]                           Build C Language Family Front-end.
llvm[clang-tools-extra]               Build Clang tools.
...
llvm[target-all]                      Build with all backends.
llvm[target-amdgpu]                   Build with AMDGPU backend.
llvm[target-arm]                      Build with ARM backend.
...</code></pre>
<p>We can install any of these targets by using the install-feature syntax:</p>
<pre><code class="powershell language-powershell">&gt; vcpkg install llvm[target-arm] # Installs LLVM with the ARM target</code></pre>
<pre><code class="json language-json">{
  "dependencies": [{ "name": "llvm", "features": ["target-arm"] }]
}</code></pre>
<h2 id="opting-out-of-default-features">Opting out of default features</h2>
<p>The llvm port includes a few default features that you as a user may not want: for example,
the <code>clang</code> feature is default, which means that <code>vcpkg install llvm</code> will also build and install clang.
If you are writing a compiler that uses LLVM as a backend,
you're likely not interested in installing clang as well,
and we can do that by disabling default features with the special <code>core</code> "feature":</p>
<pre><code class="powershell language-powershell">&gt; vcpkg install llvm[core,target-arm] # removing the default-feature with "core" also removes all of the default targets you get</code></pre>
<p>or in manifest files:</p>
<pre><code class="json language-json">{
  "dependencies": [{
    "name": "llvm",
    "default-features": false,
    "features": ["target-arm"]
  }]
}</code></pre>
<h1 id="further-reading">Further reading</h1>
<ul>
<li>The <a href="../specifications/feature-packages.html">Feature Packages</a> specification was the initial design for features.</li>
</ul>
</main></div><div id="loadFooter"></div></html>
