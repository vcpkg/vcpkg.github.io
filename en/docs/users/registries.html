<head>
    <meta name="viewport" content="width=device-width">
    <link rel="icon" href="/assets/mark/mark.svg" />
        <link rel="icon" href="/assets/mark/favicon.png" />
        <link rel="mask-icon" href="/assets/mark/favicon-mask-icon.svg" />
    
        <!-- boostrap style sheet -->
        <link
          rel="stylesheet"
          href="https://ajax.aspnetcdn.com/ajax/bootstrap/4.5.0/css/bootstrap.min.css"
          integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk"
          crossorigin="anonymous"
        />
        <link
          rel="stylesheet"
          href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/styles/default.min.css"
          integrity="sha384-s4RLYRjGGbVqKOyMGGwfxUTMOO6D7r2eom7hWZQ6BjK2Df4ZyfzLXEkonSm0KLIQ"
          crossorigin="anonymous"
        />
    
        <!-- our style sheet and fonts -->
        <link href="/css/common.css" rel="stylesheet" />
        <link href="/css/getting-started.css" rel="stylesheet" />
    
        <!-- bootstrap scripts -->
        <script type="text/javascript"
          src="https://js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js">
        </script>
        <script src="https://wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>
        <script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.6.0.min.js"></script>
        <script
          src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6"
          integrity="sha384-UBGmRyNtwBeGap4zdtKXLwUHdLJM9M/aSMLo8NaIzCxnLxYU6F9+V8veOXP3Fakh"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://ajax.aspnetcdn.com/ajax/bootstrap/4.5.0/bootstrap.min.js"
          integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/highlight.min.js"
          integrity="sha384-DmE/PJ3PvpXS92Z4Sn7vSRTqJd0T/2xkGtNgm2JaZFczBOZdCf3XbZOwnRHDgjAA"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/cmake.min.js"
          integrity="sha384-x//ggWQQKDYM6gkxzOdTUJNX9tNhjYBuM1SkQ3kgwzlFH9cxNW2meFXccjs06ubh"
          crossorigin="anonymous"
        ></script>
        <script
          src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@10.7.1/build/languages/powershell.min.js"
          integrity="sha384-+05Cp42tk0QutdpySQ0HsmEskItQQcyh04nmNheHuy1epFAdvUC9kpiwJk9lx419"
          crossorigin="anonymous"
        ></script>
    
        <!-- our scripts -->
        <script src="/dist/common.js"></script>
        <script src="/dist/documentation.js"></script>
    <script>
        $(function () {
          $('#loadFooter').load('/en/footer.html');
        });
      </script>
    </head>
    <div id="loadNavBar"></div>
    <div id="banner"></div>
    <div class="page">
    <nav class="left-side">
      <div class="docs-mobile-heading hidden">Table of Contents</div>
      <div class="docs-mobile-exit hidden"><img class="docs-mobile-exit-icon" src="/assets/misc/exit-docs.svg"></div>
      <div class="search-bar">
        <input
                  class="search-box"
                  id="pkg-search"
                  type="search"
                  name="search"
                  placeholder="Search"
                  autocomplete="off"
                  oninput=""
                />
        <ul class="search hidden">
        </ul>
      </div>
      <div id="docsNavPane"></div>
      <script>
        $('#loadNavBar').load('/en/navbar.html', setScrollFocus);
        $('#docsNavPane').load('/en/docs/navpane.html', function () {
          $(function () {
            initDocumentation();
          });
        });
      </script>
</nav><main class="right-side" id="main">
<div class="docs-mobile-show"><img class="docs-mobile-show-table" src="/assets/misc/table-docs.svg">Table of Contents</div>
<h1 id="using-registries">Using Registries</h1>
<p><strong>The latest version of this documentation is available on <a href="https://github.com/Microsoft/vcpkg/tree/master/docs/users/registries.md">GitHub</a>.</strong></p>
<p>There are two parts to using registries; this documents the use side of the
relationship. In order to learn more about creating registries for others to
use, please read <a href="../maintainers/registries.html">this documentation</a>.</p>
<h2 id="table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#using-registries">Using Registries</a><ul>
<li><a href="#table-of-contents">Table of Contents</a></li>
<li><a href="#vcpkg-configurationjson"><code>vcpkg-configuration.json</code></a></li>
<li><a href="#registry-objects">Registry Objects</a><ul>
<li><a href="#registry-objects-kind">Registry Objects: <code>"kind"</code></a></li>
<li><a href="#registry-objects-baseline">Registry Objects: <code>"baseline"</code></a></li>
<li><a href="#registry-objects-repository">Registry Objects: <code>"repository"</code></a></li>
<li><a href="#registry-objects-path">Registry Objects: <code>"path"</code></a></li></ul></li>
<li><a href="#configuration-default-registry">Configuration: <code>"default-registry"</code></a></li>
<li><a href="#configuration-registries">Configuration: <code>"registries"</code></a></li>
<li><a href="#example-configuration-file">Example Configuration File</a></li>
<li><a href="#package-name-resolution">Package Name Resolution</a></li>
<li><a href="#versioning-support">Versioning Support</a></li></ul></li>
</ul>
<h2 id="vcpkg-configurationjson"><code>vcpkg-configuration.json</code></h2>
<p>From a high level perspective, everything that a project needs to define
about registries is contained in the vcpkg configuration file. In classic
mode, the configuration file lies in the vcpkg root; for manifest mode,
the file must exist next to the project's <code>vcpkg.json</code> file.
This file is named <code>vcpkg-configuration.json</code>, and it's a simple top-level
object file.</p>
<h3 id="registry-objects">Registry Objects</h3>
<p>Registries are defined in JSON as objects. They must contain at least the
<code>"kind"</code> and <code>"baseline"</code> fields, and additionally the different kinds of
registry will have their own way of defining where the registry can be found:</p>
<ul>
<li>git registries require the <code>"repository"</code> field</li>
<li>filesystem registries require the <code>"path"</code> field</li>
<li>built-in registries do not require a field, since there is only one
built-in registry.</li>
</ul>
<h4 id="registry-objects-kind">Registry Objects: <code>"kind"</code></h4>
<p>The <code>"kind"</code> field must be a string:</p>
<ul>
<li>For git registries: <code>"git"</code></li>
<li>For filesystem registries: <code>"filesystem"</code></li>
<li>For the builtin registry: <code>"builtin"</code></li>
</ul>
<h4 id="registry-objects-baseline">Registry Objects: <code>"baseline"</code></h4>
<p>The <code>"baseline"</code> field must be a string. For git registries and for the 
built-in registry, it should be a 40-character commit ID.
For filesystem registries, it can be any string that the registry defines.</p>
<h4 id="registry-objects-repository">Registry Objects: <code>"repository"</code></h4>
<p>This should be a string, of any repository format that git understands:</p>
<ul>
<li><code>"https://github.com/microsoft/vcpkg"</code></li>
<li><code>"git@github.com:microsoft/vcpkg"</code></li>
<li><code>"/dev/vcpkg-registry"</code></li>
</ul>
<h4 id="registry-objects-path">Registry Objects: <code>"path"</code></h4>
<p>This should be a path; it can be either absolute or relative; relative paths
will be based at the directory the <code>vcpkg-configuration.json</code> lives in.</p>
<h3 id="configuration-default-registry">Configuration: <code>"default-registry"</code></h3>
<p>The <code>"default-registry"</code> field should be a registry object. It defines
the registry that is used for all packages that are not claimed by any
package registries. It may also be <code>null</code>, in which case no packages that
are not claimed by package registries may be installed.</p>
<h3 id="configuration-registries">Configuration: <code>"registries"</code></h3>
<p>The <code>"registries"</code> field should be an array of registry objects, each of
which additionally contain a <code>"packages"</code> field, which should be an array of
package names. These define the package registries, which are used for 
the specific packages named by the <code>"packages"</code> field.</p>
<p>The <code>"packages"</code> fields of all the package registries must be disjoint.</p>
<h3 id="example-configuration-file">Example Configuration File</h3>
<p>Let's assume that you have mirrored <a href="https://github.com/microsoft/vcpkg">https://github.com/microsoft/vcpkg</a> at
<a href="https://git.example.com/vcpkg">https://git.example.com/vcpkg</a>: this will be your default registry.
Additionally, you want to use North Wind Trader's registry for their
beison and beicode libraries. The following <code>vcpkg-configuration.json</code>
will work:</p>
<pre><code class="json language-json">{
  "default-registry": {
    "kind": "git",
    "repository": "https://git.example.com/vcpkg",
    "baseline": "eefee7408133f3a0fef711ef9c6a3677b7e06fd7"
  },
  "registries": [
    {
      "kind": "git",
      "repository": "https://github.com/northwindtraders/vcpkg-registry",
      "baseline": "dacf4de488094a384ca2c202b923ccc097956e0c",
      "packages": [ "beicode", "beison" ]
    }
  ]
}</code></pre>
<h2 id="package-name-resolution">Package Name Resolution</h2>
<p>The way package name resolution works in vcpkg is fairly distinct from many
package managers. It is very carefully designed to <em>never</em> implicitly choose
the registry that a package is fetched from. Just from
<code>vcpkg-configuration.json</code>, one can tell exactly from which registry a
package definition will be fetched from.</p>
<p>The name resolution algorithm is as follows:</p>
<ul>
<li>If there is a package registry that claims the package name,
use that registry; otherwise</li>
<li>If there is a default registry defined, use that registry; otherwise</li>
<li>If the default registry is set to <code>null</code>, error out; otherwise</li>
<li>use the built-in registry.</li>
</ul>
<h3 id="versioning-support">Versioning Support</h3>
<p>Versioning with custom registries works exactly as it does in the built-in
registry. You can read more about that in the <a href="versioning.html">versioning documentation</a>.</p>
</main></div><div id="loadFooter"></div></html>
